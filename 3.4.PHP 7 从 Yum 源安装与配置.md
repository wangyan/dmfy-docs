# RHEL⁄CentOS 从 Yum 源安装与配置 PHP 7

## 一、安装 PHP

### 1.1. 安装第三方YUM源

```shell
yum install epel-release
rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
```
### 1.2. 安装 php7.2.x

```shell
yum install \
    php72w-bcmath \
    php72w-common \
    php72w-fpm \
    php72w-gd \
    php72w-imap \
    php72w-mbstring \
    php72w-mcrypt \
    php72w-mysqlnd \
    php72w-opcache \
    php72w-pdo \
    php72w-pdo_dblib \
    php72w-pear \
    php72w-pecl-mongodb \
    php72w-pgsql \
    php72w-xml \
    php72w-xmlrpc
```

### 1.3. 安装 php5.6.x

```shell
yum install \
    php56w-bcmath \
    php56w-common \
    php56w-fpm \
    php56w-gd \
    php56w-imap \
    php56w-mbstring \
    php56w-mcrypt \
    php56w-mysql \
    php56w-opcache \
    php56w-pear \
    php56w-pecl-xdebug \
    php56w-pgsql \
    php56w-xml \
    php56w-xmlrpc
```

### 1.3. Centos8 安装 php7

<https://computingforgeeks.com/how-to-install-php-7-2-7-1-on-rhel-8/>

```shell
yum module -y install php/devel
php -v
sudo systemctl enable --now php-fpm
sudo yum -y install  php-devel
```

扩展

```shell
yum -y install libzip php-cli php-common php-fpm php-json php-mbstring php-xml
yum -y install php-mysqlnd php-zip php-gd  php-curl  php-bcmath php-pear
```

## 二、配置 PHP

```shell
sed -i "s|;*date.timezone =.*|date.timezone = PRC|i" /etc/php.ini && \
sed -i "s|;*memory_limit =.*|memory_limit = 512M|i" /etc/php.ini && \
sed -i "s|;*upload_max_filesize =.*|upload_max_filesize = 32M|i" /etc/php.ini && \
sed -i "s|;*max_file_uploads =.*|max_file_uploads = 20|i" /etc/php.ini && \
sed -i "s|;*post_max_size =.*|post_max_size = 320M|i" /etc/php.ini
```

启动 php

```shell
sudo systemctl start php-fpm && \
sudo systemctl enable php-fpm
```

参考文档：

- <https://webtatic.com/packages/php72/>
