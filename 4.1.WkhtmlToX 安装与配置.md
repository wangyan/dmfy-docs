# WkhtmlToX 安装与配置

## 一、安装依赖

````shell
apt-get -y install libxrender-dev  libxext-dev xz-utils
````

````shell
yum -y install libXrender-devel libXext-devel xz-devel fontconfig-devel \
    xorg-x11-fonts-75dpi  xorg-x11-fonts-Type1
````

## 二、下载安装 wkhtmltox

CentOS 7

```shell
wget http://download.gna.org/wkhtmltopdf/0.12/0.12.34/wkhtmltox-0.12.4_linux-generic-amd64.tar.xz

xz -d wkhtmltox-0.12.4_linux-generic-amd64.tar.xz
tar -xf wkhtmltox-0.12.4_linux-generic-amd64.tar

mv wkhtmltox /usr/local/
echo "/usr/local/wkhtmltox/lib" >> /etc/ld.so.conf.d/wkhtmltox.conf
ln -s /usr/local/wkhtmltox/bin/wkhtmltoimage /usr/bin/
ln -s /usr/local/wkhtmltox/bin/wkhtmltopdf /usr/bin/

ldconfig
```

CentOS 8

<https://github.com/wkhtmltopdf/wkhtmltopdf/releases>

```shell
rpm -ivh https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.5/wkhtmltox-0.12.5-1.centos7.x86_64.rpm
```

## 三、安装字体

```shell
# mkdir -p /usr/share/fonts/windows

mkdir -p /usr/share/fonts/truetype/windows
mv *.ttc  /usr/share/fonts/truetype/windows
mkfontscale
mkfontdir
fc-cache -fv
```

## 四、测试

```shell
wkhtmltopdf http://www.baidu.com baidu.pdf
```
